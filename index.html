<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AutoCloser ROI Calculator</title>
  <meta name="description" content="Estimate revenue lift and ROI from AutoCloser follow-up automation." />

  <style>
    :root{
      --bg:#0b1020; --panel:#111733; --panel-2:#0f1530;
      --accent:#31d0ff; --accent-2:#9be8ff; --text:#f3f6ff; --muted:#a7b1c8;
      --radius:16px; --shadow:0 10px 25px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial,"Noto Sans";
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(49,208,255,.2), transparent 60%),
        radial-gradient(1000px 800px at -10% 110%, rgba(155,232,255,.15), transparent 60%),
        var(--bg);
    }
    /* transparent background when embedded with ?embed=1 */
    body.embed{ background:transparent !important; }

    /* --- centered layout (compact, no bottom gap) --- */
    header{max-width:900px;margin:24px auto 8px;padding:0 20px;text-align:center}
    header h1{margin:0 0 4px;font-size:1.9rem;color:var(--accent)}
    header p{margin:0;color:var(--muted);font-size:.95rem}

    main.wrap{
      max-width:900px; margin:0 auto 0; padding:0 20px 0;
      display:grid; gap:18px;
    }
    @media (min-width:900px){ main.wrap{ grid-template-columns:1fr 1fr; } }

    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    .card h2{margin:0 0 12px;font-size:.92rem;letter-spacing:.12em;text-transform:uppercase;color:var(--accent-2)}

    /* inputs */
    .grid{display:grid;gap:14px;grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:620px){ .grid{ grid-template-columns:1fr } }

    .control{
      display:flex;flex-direction:column;justify-content:flex-start;
      background:var(--panel-2);
      border:1px solid rgba(255,255,255,.10);
      border-radius:14px;padding:12px;
      min-height:104px;
    }
    .label{font-size:.9rem;font-weight:700;margin-bottom:8px;line-height:1.2}

    input[type="number"]{
      width:100%;appearance:textfield;background:#0d1430;
      border:1px solid rgba(255,255,255,.16);color:var(--text);
      border-radius:12px;padding:14px 16px;font-size:1.08rem;min-height:50px;outline:none
    }
    input[type="number"]:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(49,208,255,.18)}
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
    input[type="number"]{-moz-appearance:textfield}
    @media (max-width:520px){ input[type="number"]{ font-size:1.12rem; padding:16px } }

    .hint{ font-size:.8rem; color:var(--muted); margin-top:6px; }

    .actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
    button{
      background:linear-gradient(180deg,var(--accent),#1a9fc2);
      color:#041018;border:none;padding:12px 14px;border-radius:12px;font-weight:800;cursor:pointer;
      box-shadow:0 8px 18px rgba(49,208,255,.25)
    }
    button.secondary{background:transparent;color:var(--accent-2);border:1px solid rgba(155,232,255,.45);box-shadow:none}

    /* results (compact) */
    .kpis{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    @media (max-width:620px){ .kpis{ grid-template-columns:1fr } }
    .kpi{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px}
    .kpi .label{color:var(--muted);font-size:.75rem;text-transform:uppercase;letter-spacing:.12em}
    .kpi .value{font-size:1.4rem;font-weight:900;margin-top:4px}
    .kpi .sub{color:var(--muted);font-size:.84rem;margin-top:2px}
    .note{margin-top:8px;color:var(--muted);font-size:.85rem;text-align:center}

    /* no extra space at bottom */
    .wrap > .card:last-child{ margin-bottom:0 }
  </style>

  <!-- embed helper -->
  <script>
    (function(){
      const p=new URLSearchParams(location.search);
      if(p.get('embed')==='1'){
        document.addEventListener('DOMContentLoaded',()=>document.body.classList.add('embed'));
      }
    })();
  </script>
</head>

<body>
  <header>
    <h1>AutoCloser ROI Calculator</h1>
    <p>Estimate your additional booked clients and ROI when AutoCloser follows up on every lead instantly!</p>
  </header>

  <main class="wrap">
    <!-- Inputs -->
    <section class="card" aria-labelledby="inputsTitle">
      <h2 id="inputsTitle">Inputs</h2>
      <div class="grid">
        <div class="control">
          <div class="label">Average Client Value ($)</div>
          <input id="avgValue" type="number" inputmode="decimal" value="3000" />
        </div>
        <div class="control">
          <div class="label">Leads per Month</div>
          <input id="leads" type="number" inputmode="numeric" value="100" />
        </div>
        <div class="control">
          <div class="label">Current Close Rate (%)</div>
          <input id="rateNow" type="number" inputmode="numeric" value="30" />
        </div>
        <div class="control">
          <div class="label">Close Rate with AutoCloser (%)</div>
          <input id="rateWith" type="number" inputmode="numeric" value="40" />
          <div class="hint" id="rateHint">Typically +5–15% lift vs your current close rate</div>
        </div>
      </div>
      <div class="actions">
        <button id="calc">Calculate ROI</button>
        <button class="secondary" id="reset">Reset</button>
      </div>
    </section>

    <!-- Results -->
    <section class="card" id="resultsCard" aria-labelledby="resultsTitle" hidden>
      <h2 id="resultsTitle">Results</h2>
      <div class="kpis">
        <div class="kpi">
          <div class="label">Additional Clients / Month</div>
          <div class="value" id="addJobs">—</div>
          <div class="sub" id="jobsDetail">From improved close rate</div>
        </div>
        <div class="kpi">
          <div class="label">Extra Revenue / Month</div>
          <div class="value" id="extraRevenue">—</div>
          <div class="sub" id="revDetail">Based on your average client value</div>
        </div>
        <div class="kpi">
          <div class="label">Recommended Plan</div>
          <div class="value" id="planName">—</div>
          <div class="sub" id="planDetail">AutoCloser tier &amp; price</div>
        </div>
        <div class="kpi">
          <div class="label">ROI</div>
          <div class="value" id="roi">—</div>
          <div class="sub" id="roiDetail">Revenue lift vs monthly cost</div>
        </div>
      </div>
      <p class="note">Assumes consistent lead volume and that faster, persistent follow-up increases conversions. Actual results vary by market, team, seasonality.</p>
    </section>
  </main>

  <script>
    const $ = (id)=> document.getElementById(id);
    const fmtUSD = n => n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});
    const clamp  = (n,min,max) => Math.min(Math.max(n,min),max);

    let userEditedRateWith = false; // track manual edits to "with AutoCloser"
    let hasCalculated = false;      // gate rendering until Calculate is clicked

    function planForLeads(leads){
      if (leads <= 100) return { name:'Starter', price:487 };
      if (leads <= 250) return { name:'Pro',     price:997 };
      return { name:'Elite', price:1497 };
    }

    function updateRateHint(){
      const now = Number($('rateNow').value);
      if (isNaN(now)) return;
      const low = Math.min(now + 5, 100);
      const high = Math.min(now + 15, 100);
      $('rateHint').textContent = `Typically +5–15% lift vs your current close rate (try ${low}%–${high}%)`;
    }

    function calc(){
      const avg   = Number($('avgValue').value);
      const leads = Number($('leads').value);
      const now   = clamp(Number($('rateNow').value),  0,100);
      const withA = clamp(Number($('rateWith').value), 0,100);

      const jobsNow  = leads * (now/100);
      const jobsWith = leads * (withA/100);
      const addJobs  = Math.max(0, jobsWith - jobsNow);
      const extraRev = addJobs * avg;

      const plan = planForLeads(leads);
      const roi  = plan.price ? (extraRev/plan.price)*100 : 0;

      $('addJobs').textContent    = addJobs.toFixed(1).replace(/\.0$/,'');
      $('jobsDetail').textContent = `From ${now}% → ${withA}% over ${leads} leads`;

      $('extraRevenue').textContent = fmtUSD(extraRev);
      $('revDetail').textContent    = `${addJobs.toFixed(1).replace(/\.0$/,'')} extra clients × ${fmtUSD(avg)} avg`;

      $('planName').textContent   = plan.name;
      $('planDetail').textContent = `${fmtUSD(plan.price)} / mo`;

      $('roi').textContent        = `${Math.round(roi).toLocaleString()}%`;
      $('roiDetail').textContent  = `${fmtUSD(extraRev)} lift vs ${fmtUSD(plan.price)} plan`;

      // reveal results after first calculation
      hasCalculated = true;
      $('resultsCard').hidden = false;
    }

    // Inputs: update hints/prefill and ONLY recalc after first click
    $('rateNow').addEventListener('input', () => {
      const now = Number($('rateNow').value);
      if (!isNaN(now) && now >= 0 && !userEditedRateWith) {
        $('rateWith').value = Math.min(now + 10, 100);
      }
      updateRateHint();
      if (hasCalculated) calc();
    });

    $('rateWith').addEventListener('input', () => {
      userEditedRateWith = true;
      if (hasCalculated) calc();
    });

    ['avgValue','leads'].forEach(id => {
      $(id).addEventListener('input', () => {
        if (hasCalculated) calc();
      });
    });

    // Calculate button triggers the first compute
    $('calc').addEventListener('click', calc);

    // Reset: restore defaults & hide results
    $('reset').addEventListener('click', ()=>{
      $('avgValue').value = 3000;
      $('leads').value    = 100;
      $('rateNow').value  = 30;
      $('rateWith').value = 40;
      userEditedRateWith = false;
      hasCalculated = false;
      $('resultsCard').hidden = true;

      $('rateHint').textContent = 'Typically +5–15% lift vs your current close rate';
      ['addJobs','extraRevenue','planName','roi'].forEach(id=> $(id).textContent='—');
      $('jobsDetail').textContent = 'From improved close rate';
      $('revDetail').textContent  = 'Based on your average client value';
      $('planDetail').textContent = 'AutoCloser tier & price';
      $('roiDetail').textContent  = 'Revenue lift vs monthly cost';
    });

    // Embed helper: add .embed class if ?embed=1
    (function(){
      const p=new URLSearchParams(location.search);
      if(p.get('embed')==='1'){ document.body.classList.add('embed'); }
    })();

    // Initial paint: only update hint; DO NOT auto-calc
    updateRateHint();
  </script>
</body>
</html>
